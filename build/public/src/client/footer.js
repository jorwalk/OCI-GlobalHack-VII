"use strict";define("forum/footer",["notifications","chat","components","translator"],function(t,e,n,a){t.prepareDOM();e.prepareDOM();a.prepareDOM();function o(){var t=document.getElementById("content");var e=document.createElement("div");e.setAttribute("id","google_translate_element");e.setAttribute("class","col-lg-12 col-md-12 col-sm-12 col-xs-12");var n=document.createElement("div");n.setAttribute("class","row");n.appendChild(e);t.insertBefore(n,t.firstChild)}function i(){new google.translate.TranslateElement({pageLanguage:"en",layout:google.translate.TranslateElement.InlineLayout.HORIZONTAL,multilanguagePage:true,autoDisplay:false},"google_translate_element")}function r(t,e){if(!utils.isNumber(e)){return}$('a[href="'+config.relative_path+t+'"].navigation-link i').toggleClass("unread-count",e>0).attr("data-content",e>99?"99+":e)}function u(t){n.get("chat/icon").toggleClass("unread-count",t>0).attr("data-content",t>99?"99+":t)}function c(){var t={};function e(e){if(e&&e.posts&&e.posts.length){var o=e.posts[0];if(parseInt(o.uid,10)!==parseInt(app.user.uid,10)&&!t[o.topic.tid]){n(e);a(o.topic.tid);t[o.topic.tid]=true}}}function n(t){var e=t.posts[0];var n=parseInt($('a[href="'+config.relative_path+'/unread"].navigation-link i').attr("data-content"),10)+1;r("/unread",n);var a=e.isMain&&parseInt(e.uid,10)!==parseInt(app.user.uid,10);if(a){var o=parseInt($('a[href="'+config.relative_path+'/unread/new"].navigation-link i').attr("data-content"),10)+1;r("/unread/new",o)}socket.emit("topics.isFollowed",e.topic.tid,function(t,e){if(t){return app.alertError(t.message)}if(e){var n=parseInt($('a[href="'+config.relative_path+'/unread/watched"].navigation-link i').attr("data-content"),10)+1;r("/unread/watched",n)}})}function a(t){$('[data-tid="'+t+'"]').addClass("unread")}$(window).on("action:ajaxify.end",function(e,n){if(n.url){var a=n.url.match(/^topic\/(\d+)/);if(a&&a[1]){delete t[a[1]]}}});socket.on("event:new_post",e)}function s(t){r("/unread",t.unreadTopicCount);r("/unread/new",t.unreadNewTopicCount);r("/unread/watched",t.unreadWatchedTopicCount)}socket.on("event:unread.updateCount",s);socket.on("event:unread.updateChatCount",u);c();o();i()});
//# sourceMappingURL=public/src/client/footer.js.map