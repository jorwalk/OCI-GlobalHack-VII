{"version":3,"sources":["public/src/client/account/blocks.js"],"names":["define","header","autocomplete","Blocks","init","user","$","ev","ui","app","parseAndTranslate","edit","item","html","on","uid","parseInt","this","getAttribute","socket","emit","blockeeUid","blockerUid","ajaxify","data","refreshList","err","alertError","message","get","config","relative_path","currentPage","done","payload","siblings","length","fail","go"],"mappings":"AAAA,aAEAA,OAAO,wBAAyB,uBAAwB,gBAAiB,SAAUC,EAAQC,GAC1F,IAAIC,KAEJA,EAAOC,KAAO,WACbH,EAAOG,OAEPF,EAAaG,KAAKC,EAAE,gBAAiB,SAAUC,EAAIC,GAClDC,IAAIC,kBAAkB,iBAAkB,QACvCC,MAAOH,EAAGI,KAAKP,OACb,SAAUQ,GACZP,EAAE,eAAeO,KAAKA,OAIxBP,EAAE,eAAeQ,GAAG,QAAS,yBAA0B,WACtD,IAAIC,EAAMC,SAASC,KAAKC,aAAa,YAAa,IAClDC,OAAOC,KAAK,oBACXC,WAAYN,EACZO,WAAYC,QAAQC,KAAKT,KACvBZ,EAAOsB,gBAIZtB,EAAOsB,YAAc,SAAUC,GAC9B,GAAIA,EAAK,CACR,OAAOjB,IAAIkB,WAAWD,EAAIE,SAG3BtB,EAAEuB,IAAIC,OAAOC,cAAgB,QAAUR,QAAQS,aAC7CC,KAAK,SAAUC,GACfzB,IAAIC,kBAAkB,iBAAkB,QAASwB,EAAS,SAAUrB,GACnEP,EAAE,oBAAoBO,KAAKA,GAC3BP,EAAE,oBAAoB6B,SAAS,aAAatB,EAAKuB,OAAS,OAAS,cAGpEC,KAAK,WACLd,QAAQe,GAAGf,QAAQS,gBAItB,OAAO7B","file":"public/src/client/account/blocks.js","sourcesContent":["'use strict';\n\ndefine('forum/account/blocks', ['forum/account/header', 'autocomplete'], function (header, autocomplete) {\n\tvar Blocks = {};\n\n\tBlocks.init = function () {\n\t\theader.init();\n\n\t\tautocomplete.user($('#user-search'), function (ev, ui) {\n\t\t\tapp.parseAndTranslate('account/blocks', 'edit', {\n\t\t\t\tedit: [ui.item.user],\n\t\t\t}, function (html) {\n\t\t\t\t$('.block-edit').html(html);\n\t\t\t});\n\t\t});\n\n\t\t$('.block-edit').on('click', '[data-action=\"toggle\"]', function () {\n\t\t\tvar uid = parseInt(this.getAttribute('data-uid'), 10);\n\t\t\tsocket.emit('user.toggleBlock', {\n\t\t\t\tblockeeUid: uid,\n\t\t\t\tblockerUid: ajaxify.data.uid,\n\t\t\t}, Blocks.refreshList);\n\t\t});\n\t};\n\n\tBlocks.refreshList = function (err) {\n\t\tif (err) {\n\t\t\treturn app.alertError(err.message);\n\t\t}\n\n\t\t$.get(config.relative_path + '/api/' + ajaxify.currentPage)\n\t\t\t.done(function (payload) {\n\t\t\t\tapp.parseAndTranslate('account/blocks', 'users', payload, function (html) {\n\t\t\t\t\t$('#users-container').html(html);\n\t\t\t\t\t$('#users-container').siblings('div.alert')[html.length ? 'hide' : 'show']();\n\t\t\t\t});\n\t\t\t})\n\t\t\t.fail(function () {\n\t\t\t\tajaxify.go(ajaxify.currentPage);\n\t\t\t});\n\t};\n\n\treturn Blocks;\n});\n"]}