{"version":3,"sources":["public/src/client/popular.js"],"names":["define","recent","components","infinitescroll","Popular","init","app","enterRoom","handleCategorySelection","config","usePagination","loadMoreTopics","direction","$","length","loadMore","after","attr","count","topicsPerPage","cid","utils","params","term","ajaxify","data","selectedTerm","filter","selectedFilter","done","topics","onTopicsLoaded","nextStart"],"mappings":"AAAA,aAGAA,OAAO,iBAAkB,eAAgB,aAAc,wBAAyB,SAAUC,EAAQC,EAAYC,GAC7G,IAAIC,KAEJA,EAAQC,KAAO,WACdC,IAAIC,UAAU,kBAEdN,EAAOO,0BAEP,IAAKC,OAAOC,cAAe,CAC1BP,EAAeE,KAAKM,KAItB,SAASA,EAAeC,GACvB,GAAIA,EAAY,IAAMC,EAAE,0BAA0BC,OAAQ,CACzD,OAGDX,EAAeY,SAAS,gCACvBC,MAAOH,EAAE,0BAA0BI,KAAK,kBACxCC,MAAOT,OAAOU,cACdC,IAAKC,MAAMC,SAASF,IACpBG,KAAMC,QAAQC,KAAKC,aAAaH,KAChCI,OAAQH,QAAQC,KAAKG,eAAeD,QAClC,SAAUF,EAAMI,GAClB,GAAIJ,EAAKK,QAAUL,EAAKK,OAAOhB,OAAQ,CACtCb,EAAO8B,eAAe,UAAWN,EAAKK,OAAQ,MAAOlB,EAAWiB,GAChEhB,EAAE,0BAA0BI,KAAK,iBAAkBQ,EAAKO,eAClD,CACNH,OAKH,OAAOzB","file":"public/src/client/popular.js","sourcesContent":["'use strict';\n\n\ndefine('forum/popular', ['forum/recent', 'components', 'forum/infinitescroll'], function (recent, components, infinitescroll) {\n\tvar Popular = {};\n\n\tPopular.init = function () {\n\t\tapp.enterRoom('popular_topics');\n\n\t\trecent.handleCategorySelection();\n\n\t\tif (!config.usePagination) {\n\t\t\tinfinitescroll.init(loadMoreTopics);\n\t\t}\n\t};\n\n\tfunction loadMoreTopics(direction) {\n\t\tif (direction < 0 || !$('[component=\"category\"]').length) {\n\t\t\treturn;\n\t\t}\n\n\t\tinfinitescroll.loadMore('topics.loadMorePopularTopics', {\n\t\t\tafter: $('[component=\"category\"]').attr('data-nextstart'),\n\t\t\tcount: config.topicsPerPage,\n\t\t\tcid: utils.params().cid,\n\t\t\tterm: ajaxify.data.selectedTerm.term,\n\t\t\tfilter: ajaxify.data.selectedFilter.filter,\n\t\t}, function (data, done) {\n\t\t\tif (data.topics && data.topics.length) {\n\t\t\t\trecent.onTopicsLoaded('popular', data.topics, false, direction, done);\n\t\t\t\t$('[component=\"category\"]').attr('data-nextstart', data.nextStart);\n\t\t\t} else {\n\t\t\t\tdone();\n\t\t\t}\n\t\t});\n\t}\n\n\treturn Popular;\n});\n"]}