{"version":3,"sources":["public/src/modules/postSelect.js"],"names":["define","components","PostSelect","pids","init","onSelect","length","get","on","togglePostSelection","$","this","disableClicksOnPosts","disable","forEach","pid","toggleClass","off","enableClicksOnPosts","post","callback","newPid","attr","parseInt","index","indexOf","push","splice","sort","a","b","disableClicks"],"mappings":"AAAA,aAGAA,OAAO,cAAe,cAAe,SAAUC,GAC9C,IAAIC,KAEJA,EAAWC,QAEXD,EAAWE,KAAO,SAAUC,GAC3BH,EAAWC,KAAKG,OAAS,EACzBL,EAAWM,IAAI,SAASC,GAAG,QAAS,aAAc,WACjDN,EAAWO,oBAAoBC,EAAEC,MAAON,KAEzCO,KAGDV,EAAWW,QAAU,WACpBX,EAAWC,KAAKW,QAAQ,SAAUC,GACjCd,EAAWM,IAAI,OAAQ,MAAOQ,GAAKC,YAAY,aAAc,SAE9Df,EAAWM,IAAI,SAASU,IAAI,QAAS,cACrCC,KAGDhB,EAAWO,oBAAsB,SAAUU,EAAMC,GAChD,IAAIC,EAASF,EAAKG,KAAK,YAEvB,GAAIC,SAASJ,EAAKG,KAAK,cAAe,MAAQ,EAAG,CAChD,OAGD,GAAID,EAAQ,CACX,IAAIG,EAAQtB,EAAWC,KAAKsB,QAAQJ,GACpC,GAAIG,KAAW,EAAG,CACjBtB,EAAWC,KAAKuB,KAAKL,GACrBF,EAAKH,YAAY,aAAc,UACzB,CACNd,EAAWC,KAAKwB,OAAOH,EAAO,GAC9BL,EAAKH,YAAY,aAAc,OAGhC,GAAId,EAAWC,KAAKG,OAAQ,CAC3BJ,EAAWC,KAAKyB,KAAK,SAAUC,EAAGC,GAAK,OAAOD,EAAIC,IAEnDV,MAKF,SAASW,IACR,OAAO,MAGR,SAASnB,IACRX,EAAWM,IAAI,QAAQC,GAAG,QAAS,WAAYuB,GAGhD,SAASb,IACRjB,EAAWM,IAAI,QAAQU,IAAI,QAAS,WAAYc,GAGjD,OAAO7B","file":"public/src/modules/postSelect.js","sourcesContent":["'use strict';\n\n\ndefine('postSelect', ['components'], function (components) {\n\tvar PostSelect = {};\n\n\tPostSelect.pids = [];\n\n\tPostSelect.init = function (onSelect) {\n\t\tPostSelect.pids.length = 0;\n\t\tcomponents.get('topic').on('click', '[data-pid]', function () {\n\t\t\tPostSelect.togglePostSelection($(this), onSelect);\n\t\t});\n\t\tdisableClicksOnPosts();\n\t};\n\n\tPostSelect.disable = function () {\n\t\tPostSelect.pids.forEach(function (pid) {\n\t\t\tcomponents.get('post', 'pid', pid).toggleClass('bg-success', false);\n\t\t});\n\t\tcomponents.get('topic').off('click', '[data-pid]');\n\t\tenableClicksOnPosts();\n\t};\n\n\tPostSelect.togglePostSelection = function (post, callback) {\n\t\tvar newPid = post.attr('data-pid');\n\n\t\tif (parseInt(post.attr('data-index'), 10) === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (newPid) {\n\t\t\tvar index = PostSelect.pids.indexOf(newPid);\n\t\t\tif (index === -1) {\n\t\t\t\tPostSelect.pids.push(newPid);\n\t\t\t\tpost.toggleClass('bg-success', true);\n\t\t\t} else {\n\t\t\t\tPostSelect.pids.splice(index, 1);\n\t\t\t\tpost.toggleClass('bg-success', false);\n\t\t\t}\n\n\t\t\tif (PostSelect.pids.length) {\n\t\t\t\tPostSelect.pids.sort(function (a, b) { return a - b; });\n\t\t\t}\n\t\t\tcallback();\n\t\t}\n\t};\n\n\n\tfunction disableClicks() {\n\t\treturn false;\n\t}\n\n\tfunction disableClicksOnPosts() {\n\t\tcomponents.get('post').on('click', 'button,a', disableClicks);\n\t}\n\n\tfunction enableClicksOnPosts() {\n\t\tcomponents.get('post').off('click', 'button,a', disableClicks);\n\t}\n\n\treturn PostSelect;\n});\n"]}