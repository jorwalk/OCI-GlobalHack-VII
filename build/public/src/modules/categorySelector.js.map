{"version":3,"sources":["public/src/modules/categorySelector.js"],"names":["define","Benchpress","translator","categorySelector","selectedCategory","el","init","_el","callback","on","categoryEl","$","this","selectCategory","attr","getSelectedCategory","cid","find","name","html","modal","categories","ajaxify","data","allCategories","parse","translate","bootbox","dialog","title","message","buttons","save","label","className","submit","ev","preventDefault"],"mappings":"AAAA,aAEAA,OAAO,oBAAqB,aAAc,cAAe,SAAUC,EAAYC,GAC9E,IAAIC,KACJ,IAAIC,EACJ,IAAIC,EACJF,EAAiBG,KAAO,SAAUC,EAAKC,GACtCA,EAAWA,GAAY,aACvBH,EAAKE,EACLH,EAAmB,KACnBC,EAAGI,GAAG,QAAS,aAAc,WAC5B,IAAIC,EAAaC,EAAEC,MACnBT,EAAiBU,eAAeH,EAAWI,KAAK,aAChDN,EAASJ,MAIXD,EAAiBY,oBAAsB,WACtC,OAAOX,GAGRD,EAAiBU,eAAiB,SAAUG,GAC3C,IAAIN,EAAaL,EAAGY,KAAK,cAAgBD,EAAM,MAC/CZ,GACCY,IAAKA,EACLE,KAAMR,EAAWI,KAAK,cAEvBT,EAAGY,KAAK,4CAA4CE,KAAKT,EAAWO,KAAK,iCAAiCE,SAG3GhB,EAAiBiB,MAAQ,SAAUC,EAAYb,GAC9C,UAAWa,IAAe,WAAY,CACrCb,EAAWa,EACXA,EAAaC,QAAQC,KAAKC,cAE3BvB,EAAWwB,MAAM,6CAChBJ,WAAYA,GACV,SAAUF,GACZjB,EAAWwB,UAAUP,EAAM,SAAUA,GACpC,IAAIC,EAAQO,QAAQC,QACnBC,MAAO,uCACPC,QAASX,EACTY,SACCC,MACCC,MAAO,oBACPC,UAAW,cACX1B,SAAU2B,MAIbhC,EAAiBG,KAAKc,EAAMH,KAAK,oCACjC,SAASkB,EAAOC,GACfA,EAAGC,iBACH,IAAIjC,EAAmBD,EAAiBY,sBACxC,GAAIX,EAAkB,CACrBI,EAASJ,EAAiBY,KAC1BI,EAAMA,MAAM,QAEb,OAAO,MAGRA,EAAMH,KAAK,QAAQR,GAAG,SAAU0B,QAKnC,OAAOhC","file":"public/src/modules/categorySelector.js","sourcesContent":["'use strict';\n\ndefine('categorySelector', ['benchpress', 'translator'], function (Benchpress, translator) {\n\tvar categorySelector = {};\n\tvar selectedCategory;\n\tvar el;\n\tcategorySelector.init = function (_el, callback) {\n\t\tcallback = callback || function () {};\n\t\tel = _el;\n\t\tselectedCategory = null;\n\t\tel.on('click', '[data-cid]', function () {\n\t\t\tvar categoryEl = $(this);\n\t\t\tcategorySelector.selectCategory(categoryEl.attr('data-cid'));\n\t\t\tcallback(selectedCategory);\n\t\t});\n\t};\n\n\tcategorySelector.getSelectedCategory = function () {\n\t\treturn selectedCategory;\n\t};\n\n\tcategorySelector.selectCategory = function (cid) {\n\t\tvar categoryEl = el.find('[data-cid=\"' + cid + '\"]');\n\t\tselectedCategory = {\n\t\t\tcid: cid,\n\t\t\tname: categoryEl.attr('data-name'),\n\t\t};\n\t\tel.find('[component=\"category-selector-selected\"]').html(categoryEl.find('[component=\"category-markup\"]').html());\n\t};\n\n\tcategorySelector.modal = function (categories, callback) {\n\t\tif (typeof categories === 'function') {\n\t\t\tcallback = categories;\n\t\t\tcategories = ajaxify.data.allCategories;\n\t\t}\n\t\tBenchpress.parse('admin/partials/categories/select-category', {\n\t\t\tcategories: categories,\n\t\t}, function (html) {\n\t\t\ttranslator.translate(html, function (html) {\n\t\t\t\tvar modal = bootbox.dialog({\n\t\t\t\t\ttitle: '[[modules:composer.select_category]]',\n\t\t\t\t\tmessage: html,\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tsave: {\n\t\t\t\t\t\t\tlabel: '[[global:select]]',\n\t\t\t\t\t\t\tclassName: 'btn-primary',\n\t\t\t\t\t\t\tcallback: submit,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tcategorySelector.init(modal.find('[component=\"category-selector\"]'));\n\t\t\t\tfunction submit(ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tvar selectedCategory = categorySelector.getSelectedCategory();\n\t\t\t\t\tif (selectedCategory) {\n\t\t\t\t\t\tcallback(selectedCategory.cid);\n\t\t\t\t\t\tmodal.modal('hide');\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tmodal.find('form').on('submit', submit);\n\t\t\t});\n\t\t});\n\t};\n\n\treturn categorySelector;\n});\n\n"]}