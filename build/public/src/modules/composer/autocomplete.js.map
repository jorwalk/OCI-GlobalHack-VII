{"version":3,"sources":["node_modules/nodebb-plugin-composer-default/static/lib/composer/autocomplete.js"],"names":["define","preview","autocomplete","init","postContainer","post_uuid","element","find","dropdownClass","timer","data","strategies","options","zIndex","dropdownClassName","on","clearTimeout","setTimeout","dropdown","document","querySelector","pos","getBoundingClientRect","margin","parseFloat","style","marginTop","offset","window","innerHeight","bottom","Math","min","$","trigger","textcomplete","css","render"],"mappings":"AAAA,aAIAA,OAAO,yBAA0B,oBAAqB,SAASC,GAE9D,IAAIC,KAEJA,EAAaC,KAAO,SAASC,EAAeC,GAC3C,IAAIC,EAAUF,EAAcG,KAAK,UACjC,IAAIC,EAAgB,kCAAoCH,EACxD,IAAII,EAEJ,IAAIC,GACHJ,QAASA,EACTK,cACAC,SACCC,OAAQ,IACRC,kBAAmBN,EAAgB,yCAIrCF,EAAQS,GAAG,QAAS,WACnBC,aAAaP,GACbA,EAAQQ,WAAW,WAClB,IAAIC,EAAWC,SAASC,cAAc,IAAMZ,GAC5C,IAAIa,EAAMH,EAASI,wBAEnB,IAAIC,EAASC,WAAWN,EAASO,MAAMC,UAAW,KAAO,EAEzD,IAAIC,EAASC,OAAOC,YAAcN,EAAS,GAAKF,EAAIS,OACpDZ,EAASO,MAAMC,UAAYK,KAAKC,IAAIL,EAAQ,GAAK,MAC/C,KAGJM,EAAEL,QAAQM,QAAQ,6BAA8BxB,GAChDA,EAAKJ,QAAQ6B,aAAazB,EAAKC,WAAYD,EAAKE,SAChDqB,EAAE,yBAAyBG,IAAI,SAAU,QAAQ7B,KAAK,YAAY6B,IAAI,SAAU,QAEhF1B,EAAKJ,QAAQS,GAAG,sBAAuB,WACtCd,EAAQoC,OAAOjC,MAIjB,OAAOF","file":"node_modules/nodebb-plugin-composer-default/static/lib/composer/autocomplete.js","sourcesContent":["'use strict';\n\n/* globals define */\n\ndefine('composer/autocomplete', ['composer/preview'], function(preview) {\n\n\tvar autocomplete = {};\n\n\tautocomplete.init = function(postContainer, post_uuid) {\n\t\tvar element = postContainer.find('.write');\n\t\tvar dropdownClass = 'composer-autocomplete-dropdown-' + post_uuid;\n\t\tvar timer;\n\n\t\tvar data = {\n\t\t\telement: element,\n\t\t\tstrategies: [],\n\t\t\toptions: {\n\t\t\t\tzIndex: 20000,\n\t\t\t\tdropdownClassName: dropdownClass + ' dropdown-menu textcomplete-dropdown',\n\t\t\t}\n\t\t};\n\n\t\telement.on('keyup', function () {\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = setTimeout(function () {\n\t\t\t\tvar dropdown = document.querySelector('.' + dropdownClass);\n\t\t\t\tvar pos = dropdown.getBoundingClientRect();\n\n\t\t\t\tvar margin = parseFloat(dropdown.style.marginTop, 10) || 0;\n\n\t\t\t\tvar offset = window.innerHeight + margin - 10 - pos.bottom;\n\t\t\t\tdropdown.style.marginTop = Math.min(offset, 0) + 'px';\n\t\t\t}, 0);\n\t\t});\n\n\t\t$(window).trigger('composer:autocomplete:init', data);\n\t\tdata.element.textcomplete(data.strategies, data.options);\n\t\t$('.textcomplete-wrapper').css('height', '100%').find('textarea').css('height', '100%');\n\n\t\tdata.element.on('textComplete:select', function() {\n\t\t\tpreview.render(postContainer);\n\t\t});\n\t};\n\n\treturn autocomplete;\n});\n"]}